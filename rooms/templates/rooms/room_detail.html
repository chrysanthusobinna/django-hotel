{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-5 room-detail">
    <div class="row">
        <!-- Carousel Column -->
        <div class="col-md-6">
            <div id="roomCarousel" class="carousel slide mb-4" data-ride="carousel">
                <div class="carousel-inner rounded">
                    <div class="carousel-item active">
                        {% if room.image %}
                            <img src="{{ room.image.url }}" class="d-block w-100" alt="{{ room.name }}">
                        {% endif %}
                    </div>
                
                    {% for img in room.images.all %}
                    <div class="carousel-item">
                        <img src="{{ img.image.url }}" class="d-block w-100" alt="{{ img.caption }}">
                    </div>
                    {% endfor %}
                </div>
                
                <a class="carousel-control-prev" href="#roomCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </a>
                <a class="carousel-control-next" href="#roomCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </a>
            </div>
        </div>

        <!-- Room Info Column -->
        <div class="col-md-6">
            <div class="room-info mb-4">
                <h2 class="fw-bold">{{ room.name }}</h2>
                <p class="text-muted">{{ room.description }}</p>
                <h4 class="text-primary">Â£{{ room.price }}/night</h4>
                <a href="tel:+441234567890" class="btn btn-outline-primary btn-block mt-3">
                    <i class="fas fa-phone-alt"></i> Call us now to make Reservation
                </a>
            </div>
        </div>
    </div>

    <!-- Booking Form -->
    <div class="booking-form mt-5" id="booking-form">
        <h4 class="mb-3">Book This Room</h4>
        <form method="POST" action="{% url 'bookings:booking_summary' %}">
            {% csrf_token %}
            <input type="hidden" name="room_id" value="{{ room.id }}">

            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Check-In Date</label>
                    <input type="date" class="form-control" name="check_in" required>
                </div>
                <div class="form-group col-md-6">
                    <label>Check-Out Date</label>
                    <input type="date" class="form-control" name="check_out" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Number of Adults</label>
                    <input type="number" class="form-control" name="adults" min="1" value="1" required>
                </div>
                <div class="form-group col-md-6">
                    <label>Number of Children</label>
                    <input type="number" class="form-control" name="children" min="0" value="0">
                </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-3">Confirm Booking</button>
        </form>
    </div>
</div>
{% endblock %}
